<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Quick Collector â€” Formspree</title>
  <style>
    :root{--card-bg:rgba(255,255,255,0.92);--muted:#64748b;--accent:#06b6d4}
    *{box-sizing:border-box}
    body{
      font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;
      margin:0;min-height:100vh;display:flex;align-items:center;justify-content:center;padding:32px;
      background:
        linear-gradient(180deg, rgba(7,10,25,0.18), rgba(7,10,25,0.18)),
        url('https://images.unsplash.com/photo-1503264116251-35a269479413?auto=format&fit=crop&w=2100&q=80') no-repeat center/cover fixed;
      -webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;
    }
    .card{width:100%;max-width:720px;background:var(--card-bg);backdrop-filter:blur(6px);border-radius:14px;padding:22px;box-shadow:0 12px 40px rgba(2,6,23,0.18);color:#04202a}
    h1{margin:0 0 6px;font-size:1.25rem}
    p{margin:0 0 14px;color:var(--muted)}
    .row{display:flex;gap:12px}
    button{padding:10px 14px;border-radius:10px;border:0;cursor:pointer;font-weight:700}
    .btn-primary{background:var(--accent);color:white}
    .btn-ghost{background:transparent;border:1px solid rgba(2,6,23,0.06);color:#062023}
    input{width:100%;padding:10px;border-radius:8px;border:1px solid rgba(2,6,23,0.06);margin-top:8px}
    .hidden{display:none}
    textarea{width:100%;height:140px;padding:10px;border-radius:8px;border:1px solid rgba(2,6,23,0.06);margin-top:10px;white-space:pre-wrap}
    .note{font-size:0.95rem;color:var(--muted);margin-top:10px}
    footer.small{font-size:0.85rem;color:var(--muted);margin-top:10px;text-align:center}
  </style>
</head>
<body>

  <main class="card" id="viewChoose">
    <h1>Quick check</h1>
    <p class="note">Pick how you identify to continue.</p>

    <div class="row">
      <button id="girlBtn" class="btn-primary" style="flex:1">Girl</button>
      <button id="boyBtn" class="btn-ghost" style="flex:1">Boy</button>
    </div>

    <footer class="small">Admin can view local entries only.</footer>
  </main>

  <!-- name -->
  <section class="card hidden" id="viewName">
    <h1>Your name?</h1>
    <input id="inputName" placeholder="Type your name" />
    <div class="row" style="margin-top:12px">
      <button id="nameNext" class="btn-primary">Next</button>
      <button id="nameBack" class="btn-ghost">Back</button>
    </div>
  </section>

  <!-- id -->
  <section class="card hidden" id="viewID">
    <h1>Social ID</h1>
    <p class="note">Insta or Snap (without @)</p>
    <input id="inputID" placeholder="your_insta_or_snap" />
    <div class="row" style="margin-top:12px">
      <button id="submitAll" class="btn-primary">Submit</button>
      <button id="idBack" class="btn-ghost">Back</button>
    </div>
  </section>

  <section class="card hidden" id="goodbyePage">
    <h1>Goodbye sweetie ðŸ’•</h1>
    <p class="note">Your data has been submitted.</p>
  </section>

  <section class="card hidden" id="boyDone">
    <h1>You're king ðŸ‘‘</h1>
    <p class="note">Sent successfully.</p>
  </section>

  <script>
    // ========== FORM ENDPOINT (YOUR FORMSPREE LINK) ==========
    const FORMSPREE_ENDPOINT = "https://formspree.io/f/xkgkbnvg";
    // =========================================================

    const viewChoose = document.getElementById("viewChoose");
    const viewName = document.getElementById("viewName");
    const viewID = document.getElementById("viewID");
    const goodbyePage = document.getElementById("goodbyePage");
    const boyDone = document.getElementById("boyDone");

    const girlBtn = document.getElementById("girlBtn");
    const boyBtn = document.getElementById("boyBtn");
    const nameNext = document.getElementById("nameNext");
    const nameBack = document.getElementById("nameBack");
    const idBack = document.getElementById("idBack");
    const submitAll = document.getElementById("submitAll");

    const inputName = document.getElementById("inputName");
    const inputID = document.getElementById("inputID");

    let currentGender = null;

    function show(el){ el.classList.remove("hidden"); }
    function hide(el){ el.classList.add("hidden"); }
    function hideAll(){
      hide(viewChoose); hide(viewName); hide(viewID); hide(goodbyePage); hide(boyDone);
    }

    girlBtn.addEventListener("click", ()=>{
      currentGender = "Girl";
      hideAll(); show(viewName);
    });

    boyBtn.addEventListener("click", ()=>{
      currentGender = "Boy";
      hideAll(); show(viewName);
    });

    nameBack.addEventListener("click", ()=>{ hideAll(); show(viewChoose); });
    idBack.addEventListener("click", ()=>{ hideAll(); show(viewName); });

    nameNext.addEventListener("click", ()=>{
      sessionStorage.setItem("qc_name", inputName.value.trim());
      hideAll(); show(viewID);
    });

    submitAll.addEventListener("click", async ()=>{
      const name = sessionStorage.getItem("qc_name") || "";
      const id = inputID.value.trim();
      const entry = { t: new Date().toISOString(), gender: currentGender, name, id };

      try {
        const res = await fetch(FORMSPREE_ENDPOINT, {
          method: "POST",
          headers: { "Content-Type": "application/json", "Accept": "application/json" },
          body: JSON.stringify(entry)
        });

        if (!res.ok) throw new Error("Formspree error");
      } catch (err){
        console.warn("Failed to send", err);
      }

      hideAll();
      if(currentGender === "Girl") show(goodbyePage);
      else show(boyDone);
    });
  </script>
</body>
</html>
