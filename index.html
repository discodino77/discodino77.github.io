<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Mummy chura lunga</title>
  <style>
    :root{
      --card-bg:rgba(255,255,255,0.92);
      --muted:#64748b;
      --accent:#06b6d4;
      --text:#04202a;
    }
    *{box-sizing:border-box}
    body{
      font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;
      margin:0;min-height:100vh;display:flex;align-items:center;justify-content:center;padding:32px;
      background:
        linear-gradient(180deg, rgba(7,10,25,0.18), rgba(7,10,25,0.18)),
        url('https://images.unsplash.com/photo-1503264116251-35a269479413?auto=format&fit=crop&w=2100&q=80') no-repeat center/cover fixed;
      -webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;
      color:var(--text); transition: background 350ms ease;
    }

    /* final-bg applied to body when showing final screens */
    .final-bg {
      background:
        linear-gradient(180deg, rgba(7,10,25,0.22), rgba(7,10,25,0.22)),
        url('igo1.png') no-repeat center/cover fixed !important;
    }

    .card{width:100%;max-width:720px;background:var(--card-bg);backdrop-filter:blur(6px);border-radius:14px;padding:22px;box-shadow:0 12px 40px rgba(2,6,23,0.18)}
    h1{margin:0 0 6px;font-size:1.25rem}
    p{margin:0 0 14px;color:var(--muted)}
    .row{display:flex;gap:12px}
    button{padding:10px 14px;border-radius:10px;border:0;cursor:pointer;font-weight:700}
    .btn-primary{background:var(--accent);color:white}
    .btn-ghost{background:transparent;border:1px solid rgba(2,6,23,0.06);color:#062023}
    input{width:100%;padding:10px;border-radius:8px;border:1px solid rgba(2,6,23,0.06);margin-top:8px}
    .hidden{display:none}
    textarea{width:100%;height:140px;padding:10px;border-radius:8px;border:1px solid rgba(2,6,23,0.06);margin-top:10px;white-space:pre-wrap}
    .note{font-size:0.95rem;color:var(--muted);margin-top:10px}
    footer.small{font-size:0.85rem;color:var(--muted);margin-top:10px;text-align:center}
    a.cta {
      color:var(--accent);
      font-weight:700;
      font-size:1rem;
      text-decoration:none;
      display:inline-block;
      padding:8px 12px;
      border-radius:10px;
      background:rgba(6,182,212,0.08);
    }
    .center{text-align:center}
    .muted-small{font-size:0.85rem;color:#94a3b8;margin-top:8px}
    .card.fade-in { animation: fadeIn .28s ease both; }
    @keyframes fadeIn { from { transform: translateY(6px); opacity: 0 } to { transform: translateY(0); opacity: 1 } }
  </style>
</head>
<body>

  <main class="card fade-in" id="viewChoose">
    <h1>Quick check</h1>
    <p class="note">Pick how you identify to continue.</p>

    <div class="row">
      <button id="girlBtn" class="btn-primary" style="flex:1">Girl</button>
      <button id="boyBtn" class="btn-ghost" style="flex:1">Boy</button>
    </div>

    <footer class="small">bonus joke: ek baar ek raja hota hai wo ek faqeer ko bolta hai, ae gareeebðŸ˜­ðŸ˜­ðŸ˜­ðŸ˜­ðŸ˜­ðŸ˜­ðŸ˜‚ â€” ye joke kitna funny hai?</footer>
  </main>

  <!-- name -->
  <section class="card hidden" id="viewName">
    <h1>Your name?</h1>
    <!-- added name attr & autocomplete off to avoid autofill weirdness -->
    <input id="inputName" name="name" placeholder="Type your name" autocomplete="name" />
    <div class="row" style="margin-top:12px">
      <button id="nameNext" class="btn-primary">Next</button>
      <button id="nameBack" class="btn-ghost">Back</button>
    </div>
  </section>

  <!-- id -->
  <section class="card hidden" id="viewID">
    <h1>Social ID</h1>
    <p class="note">Insta or Snap (without @)</p>
    <!-- crucial: name attribute, type=text, autocomplete off -->
    <input id="inputID" name="id" type="text" autocomplete="off" placeholder="your_insta_or_snap" />
    <div class="row" style="margin-top:12px">
      <button id="submitAll" class="btn-primary" disabled>Submit</button>
      <button id="idBack" class="btn-ghost">Back</button>
    </div>
    <div class="muted-small">billo bagga billiyan da ki karegi?</div>
  </section>

  <!-- Girl final -->
  <section class="card hidden" id="goodbyePage">
    <h1>Goodbye sweetie ðŸ’•</h1>
    <p class="note">Your data has been submitted.</p>

    <p class="note center" style="margin-top:16px;">
      <a class="cta" href="https://wa.me/919694987181" target="_blank" rel="noopener noreferrer">ðŸ¦‡ Contact Batman</a>
    </p>
    <div style="margin-top:12px" class="center">
      <button id="restartFromGoodbye" class="btn-ghost">Back to start</button>
    </div>
  </section>

  <!-- Boy final -->
  <section class="card hidden" id="boyDone">
    <h1>You're king ðŸ‘‘</h1>
    <p class="note">nice! never fake your gender for a bullshit site â€” you're hero of gautham</p>

    <p class="note center" style="margin-top:16px;">
      <a class="cta" href="https://wa.me/919694987181" target="_blank" rel="noopener noreferrer">ðŸ¦‡ Contact Batman</a>
    </p>
    <div style="margin-top:12px" class="center">
      <button id="restartFromBoy" class="btn-ghost">Back to start</button>
    </div>
  </section>

  <script>
    // ========== FORM ENDPOINT (YOUR GETFORM LINK) ==========
    const GETFORM_ENDPOINT = "https://getform.io/f/apjzwyda";
    // =====================================================

    const viewChoose = document.getElementById("viewChoose");
    const viewName = document.getElementById("viewName");
    const viewID = document.getElementById("viewID");
    const goodbyePage = document.getElementById("goodbyePage");
    const boyDone = document.getElementById("boyDone");

    const girlBtn = document.getElementById("girlBtn");
    const boyBtn = document.getElementById("boyBtn");
    const nameNext = document.getElementById("nameNext");
    const nameBack = document.getElementById("nameBack");
    const idBack = document.getElementById("idBack");
    const submitAll = document.getElementById("submitAll");

    const restartFromGoodbye = document.getElementById("restartFromGoodbye");
    const restartFromBoy = document.getElementById("restartFromBoy");

    const inputName = document.getElementById("inputName");
    const inputID = document.getElementById("inputID");

    let currentGender = null;

    function show(el){
      el.classList.remove("hidden");
      el.classList.add("fade-in");
      setTimeout(()=> el.classList.remove("fade-in"), 400);
    }
    function hide(el){ el.classList.add("hidden"); }
    function hideAll(){
      hide(viewChoose); hide(viewName); hide(viewID); hide(goodbyePage); hide(boyDone);
    }

    function setFinalBackground(){
      document.body.classList.add("final-bg");
    }

    function resetBackground(){
      document.body.classList.remove("final-bg");
    }

    // Clicking gender buttons
    girlBtn.addEventListener("click", ()=>{
      currentGender = "Girl";
      resetBackground();
      hideAll(); show(viewName);
    });

    boyBtn.addEventListener("click", ()=>{
      currentGender = "Boy";
      resetBackground();
      hideAll(); show(viewName);
    });

    // navigation back
    nameBack.addEventListener("click", ()=>{
      hideAll();
      resetBackground();
      show(viewChoose);
    });

    idBack.addEventListener("click", ()=>{
      hideAll();
      resetBackground();
      show(viewName);
    });

    // next from name
    nameNext.addEventListener("click", ()=>{
      sessionStorage.setItem("qc_name", inputName.value.trim());
      hideAll(); show(viewID);
      // re-evaluate submit button (in case user filled name)
      updateSubmitState();
    });

    // enable submit only when at least name or id present
    function updateSubmitState(){
      const name = (sessionStorage.getItem("qc_name") || "").trim();
      const idVal = (inputID.value || "").trim();
      submitAll.disabled = !(name.length > 0 || idVal.length > 0);
    }

    // watch id input
    inputID.addEventListener('input', updateSubmitState);

    // submit
    submitAll.addEventListener("click", async ()=>{
      const name = sessionStorage.getItem("qc_name") || inputName.value.trim() || "";
      const id = inputID.value.trim() || "";
      const entryTime = new Date().toISOString();
      const entry = { t: entryTime, gender: currentGender, name, id };

      if(!name && !id){
        alert('Please enter at least a name or social ID.');
        return;
      }

      try {
        // Use FormData to POST to Getform (no redirect). Getform accepts form-encoded/multipart posts.
        const fd = new FormData();
        // keep keys same as you've used in dashboard: t, gender, name, id
        fd.append('t', entry.t);
        fd.append('gender', entry.gender || '');
        fd.append('name', entry.name || '');
        fd.append('id', entry.id || '');

        // DEBUG: log outgoing payload so you can inspect in console
        console.groupCollapsed('Outgoing FormData');
        for (const pair of fd.entries()) console.log(pair[0] + ':', pair[1]);
        console.groupEnd();

        const res = await fetch(GETFORM_ENDPOINT, {
          method: "POST",
          body: fd
          // DO NOT set Content-Type header â€” browser sets multipart boundary automatically
        });

        if (!res.ok) {
          console.warn("Getform returned non-ok status:", res.status);
        }
      } catch (err){
        console.warn("Failed to send", err);
      }

      hideAll();
      setFinalBackground();

      if(currentGender === "Girl") show(goodbyePage);
      else show(boyDone);
    });

    // restart buttons on final screens
    restartFromGoodbye.addEventListener("click", ()=>{
      hideAll();
      resetBackground();
      show(viewChoose);
    });

    restartFromBoy.addEventListener("click", ()=>{
      hideAll();
      resetBackground();
      show(viewChoose);
    });

    // prefill name if available
    document.addEventListener("DOMContentLoaded", ()=>{
      const prev = sessionStorage.getItem("qc_name");
      if(prev) inputName.value = prev;
      // make sure background reset on load
      resetBackground();
      updateSubmitState();
    });

    // helpful: expose a function for debugging in console
    window._debugFormState = () => ({
      name: sessionStorage.getItem('qc_name'),
      id: inputID.value,
      gender: currentGender
    });
  </script>
</body>
</html>

